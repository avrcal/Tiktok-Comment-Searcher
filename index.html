<!DOCTYPE html>
<html prefix="og: https://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta property="og:title" content="Dynamic Media Embed">
    <meta property="og:type" content="video.other">
    <meta property="og:image" id="og-image">
    <meta property="og:video" id="og-video">
    <meta property="og:video:type" content="video/mp4">
    <meta property="twitter:player" id="twitter-player">
    <meta name="twitter:card" content="player">
    <script>
        function sanitizeUrl(url) {
            try {
                const parsed = new URL(url);
                return `${parsed.protocol}//${parsed.host}${parsed.pathname}`;
            } catch (e) {
                console.error('Invalid URL:', e);
                return '';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const videoUrl = urlParams.get('video');
            const gifUrl = urlParams.get('gif');

            const sanitizedVideo = videoUrl ? sanitizeUrl(videoUrl) : '';
            const sanitizedGif = gifUrl ? sanitizeUrl(gifUrl) : '';

            document.getElementById('og-image').setAttribute('content', sanitizedGif);
            document.getElementById('og-video').setAttribute('content', sanitizedVideo);
            document.getElementById('twitter-player').setAttribute('content', sanitizedVideo);
            
            const iframe = document.getElementById('video-iframe');
            iframe.src = sanitizedVideo;
        });
    </script>
</head>
<body style="display:none;">
    <iframe id="video-iframe" style="width:0;height:0;border:0;"></iframe>
</body>
</html>
